/**
 * Your application code goes here<br>
 * This file was generated by <a href="https://www.codenameone.com/">Codename One</a> for the purpose
 * of building native mobile applications using Java.
 */


package userclasses;

import com.codename1.location.Location;
import com.codename1.location.LocationManager;
import com.codename1.maps.Coord;
import com.codename1.maps.MapComponent;
import com.codename1.maps.layers.PointLayer;
import generated.StateMachineBase;
import com.codename1.ui.*;
import com.codename1.ui.events.*;
import com.codename1.ui.util.Resources;

import java.io.IOException;

/**
 * @author Your name here
 */
public class StateMachine extends StateMachineBase {
    public StateMachine(String resFile) {
        super(resFile);
        // do not modify, write code in initVars and initialize class members there,
        // the constructor might be invoked too late due to race conditions that might occur
    }

    /**
     * this method should be used to initialize variables instead of
     * the constructor/class scope to avoid race conditions
     */
    protected void initVars(Resources res) {
    }


    @Override
    protected void onCreateMainScreen() {

    }

    @Override
    protected void onLogin_BtnLoginAction(Component c, ActionEvent event) {


    }

    @Override
    protected void beforeMainScreen(Form f) {
        try {
            Location lastKnownLocation = LocationManager.getLocationManager().getCurrentLocation();
            final MapComponent mapComponent = new MapComponent();

             Image image = fetchResourceFile().getImage("/logo.png");
             String name = "i'm here";
             Coord position = new Coord(lastKnownLocation.getLatitude(), lastKnownLocation.getLongitude());
            PointLayer pointLayer = new PointLayer(position, name, image);
            pointLayer.setDisplayName(true);

            mapComponent.addLayer(pointLayer);
            f.addComponent(mapComponent);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
